
**业务报销单据本质上属于数据仓库中的“事实表”模型**，通常结合**星形模型**设计。通俗来说，报销单据是记录费用发生过程的“交易流水单”，**核心是金额和流程状态**，通过关联维度表解释业务细节。

---

### **举个差旅报销的示例**
**业务场景**：  
> 员工李四2023年10月报销差旅费3000元，归属销售部，费用类型为交通费，审批通过后已付款。

---

### **模型拆解**
#### 1️⃣ **事实表（记录核心交易）**
| 单据ID  | 员工ID | 部门ID | 费用类型ID | 申请日期ID | 审批状态 | 报销金额 | 实际支付金额 |  
|---------|--------|--------|------------|------------|----------|----------|--------------|  
| BX202310001 | E007   | D002   | F003       | 20231015   | 已付款   | 3000     | 3000         |  

#### 2️⃣ **维度表（解释业务含义）**
- **员工维度表**  
  | 员工ID | 姓名 | 职位     | 所属部门ID |  
  |--------|------|----------|------------|  
  | E007   | 李四 | 销售经理 | D002       |  

- **部门维度表**  
  | 部门ID | 部门名称 | 所属分公司 |  
  |--------|----------|------------|  
  | D002   | 销售部   | 北京分公司 |  

- **费用类型维度表**  
  | 类型ID | 费用名称 | 财务科目 | 是否预算内 |  
  |--------|----------|----------|------------|  
  | F003   | 交通费   | 6601-差旅费 | 是         |  

- **日期维度表**  
  | 日期ID   | 日期        | 年份 | 季度 | 月份 |  
  |----------|-------------|------|------|------|  
  | 20231015 | 2023-10-15  | 2023 | Q4   | 10   |  

---

### **3秒理解关键点**  
1. **事实表核心是钱和状态**：  
   - 记录**报销金额**、**支付金额**、**审批状态**（如“已付款”）  
   - 像收银小票，但多了流程状态跟踪  
2. **维度表回答“谁、哪、为什么”**：  
   - 员工表说明“谁报销”，部门表说明“费用归属”，费用类型表说明“钱花在哪类事项”  
3. **结构像星形模型**：  
   - 一个事实表连接多个维度表，适合快速分析“销售部Q4交通费总额”  

---

### **为什么用星形模型？**  
- **高频分析需求**：  
  财务需要快速查“各部门预算执行情况”或“某员工年度报销总额”，星形模型关联层级少、响应快。  
- **维度复杂度低**：  
  费用类型通常只有2-3级分类（如：费用大类→子类），无需雪花模型的多层拆分。  

---

### **报销模型的特殊性**  
1. **流程状态跟踪**：  
   事实表中包含**审批状态**（如“待审批/已驳回/已付款”），可分析流程效率。  
2. **双金额设计**：  
   - **报销金额**（申请金额）  
   - **实际支付金额**（可能因审批调整而不同）  
3. **时间维度多样性**：  
   可能需关联多个日期维度（申请日期、审批日期、支付日期）。  

---

### **典型分析场景**  
1. **费用监控**：  
   “销售部2023年交通费是否超预算？”  
   → 关联事实表+部门表+费用类型表+预算表  
2. **流程效率分析**：  
   “平均报销审批周期是多长？”  
   → 比较事实表中的申请日期ID和审批完成日期ID  
3. **异常检测**：  
   “同一员工单月多次报销相同金额的餐费”  
   → 按员工ID+费用类型ID聚合分析  

---

### **对比财务凭证模型**  
|              | **财务凭证模型**               | **业务报销模型**               |  
|--------------|--------------------------------|--------------------------------|  
| **核心目标** | 记录会计分录（借贷平衡）       | 记录业务申请及执行过程         |  
| **金额设计** | 借贷双向金额（必须平衡）       | 申请金额 vs 实际支付金额       |  
| **状态跟踪** | 无状态（仅记录结果）           | 包含审批/支付流程状态          |  
| **分析重点** | 财务报表合规性                 | 费用管控与流程效率             |  

**总结**：业务报销单据是**带流程状态的星形模型**，既记录“钱怎么花”，也跟踪“钱怎么批”。