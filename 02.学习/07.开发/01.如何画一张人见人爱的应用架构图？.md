

[傅一平](https://www.zhihu.com/people/fu-yiping-78)

​![](https://pic1.zhimg.com/v2-4812630bc27d642f7cafcd6cdeca3d7a.jpg?source=88ceefae)

分享在数据平台、机器学习、数据变现及数据管理上的实践和思考

​关注

[

来自专栏 · 与数据同行

](https://www.zhihu.com/column/c_1064212754910527488)

5 人赞同了该文章

原文来自于微信公众号《与数据同行》 微信号：ysjtx_fyp

作者：傅一平

原文链接：[如何画一张人见人爱的应用架构图？](https://link.zhihu.com/?target=https%3A//mp.weixin.qq.com/s%3F__biz%3DMzIwNDI0ODY1OA%3D%3D%26amp%3Bmid%3D2655980389%26amp%3Bidx%3D1%26amp%3Bsn%3D04b53958e29d123ae086ffb5d67e1609%26amp%3Bchksm%3D8d78a858ba0f214e326267fb2b3a58f28e4a5aaadd373020f257e7bd1aa62fa3345bcff485b2%26token%3D887808739%26lang%3Dzh_CN%23rd)

这篇文章表达了我对应用架构的最新理解，并且采用[Archimate](https://zhida.zhihu.com/search?content_id=238175325&content_type=Article&match_order=1&q=Archimate&zhida_source=entity)架构工具进行建模，力图画出最漂亮而专业的**应用架构图**，为了画图还专门去学习了Archimate，大家进来欣赏一下吧。

下面也列出了我前期写的如何画**业务架构**、**数据架构**和**技术架构**图的文章，方便大家系统学习。

[怎样画一张人见人爱的业务架构图？](https://link.zhihu.com/?target=https%3A//mp.weixin.qq.com/s%3F__biz%3DMzIwNDI0ODY1OA%3D%3D%26mid%3D2655977437%26idx%3D1%26sn%3D86c87e8308a0fc6723494b27b0690069%26chksm%3D8d795ce0ba0ed5f6d5f61d2ac6b919f7cf2198eef87b3ffb1a45e58be412857497b1a8d9b017%26scene%3D21%23wechat_redirect)[如何画出一张清晰而专业的技术架构图？](https://link.zhihu.com/?target=https%3A//mp.weixin.qq.com/s%3F__biz%3DMzIwNDI0ODY1OA%3D%3D%26mid%3D2655978682%26idx%3D1%26sn%3Da3ddfc22d19632c2623238777a02cc67%26chksm%3D8d78a787ba0f2e91d5d86acdfa29b38d2afef44751be245d1c90943d02c44ac1b03ddd6b0d5f%26scene%3D21%23wechat_redirect)

[始于业务，终于技术，敲开理解数据架构的大门！](https://link.zhihu.com/?target=https%3A//mp.weixin.qq.com/s%3F__biz%3DMzIwNDI0ODY1OA%3D%3D%26mid%3D2655976649%26idx%3D1%26sn%3D5f60b3c206ce41997c91bb76b6329d11%26chksm%3D8d795ff4ba0ed6e28ac325df81417509e062153c0706284a7136a35ca05a449e9a3524ecfb87%26token%3D1756961312%26lang%3Dzh_CN%26scene%3D21%23wechat_redirect)

**一、企业架构全景图**

[TOGAF](https://zhida.zhihu.com/search?content_id=238175325&content_type=Article&match_order=1&q=TOGAF&zhida_source=entity)是一个工具集、术语集和流程集，提供了一个全面的方法来开发企业架构。TOGAF的中心是一个被称为"架构开发方法"（简称[ADM](https://zhida.zhihu.com/search?content_id=238175325&content_type=Article&match_order=1&q=ADM&zhida_source=entity)）的流程，如下图所示：

![](https://pic3.zhimg.com/v2-3da631c8f449b90ece25d22aeb1ed854_1440w.jpg)

我们最关注的是业务架构、数据架构、应用架构及技术架构，这些架构层次的描述体现了从高层策略到低层实施的逐渐细化的逻辑。

![](https://pica.zhimg.com/v2-ead0affa787ce95591b60fe32a334d32_1440w.jpg)

四种架构域是层层递进、相互关联的。

业务架构定义了“我们需要做什么”。

数据架构和应用架构描述了“我们将如何做到这一点”。

技术架构则提供了“我们需要哪些工具和技术来实现这一目标”的答案。

当一个组织制定企业架构策略时，这四个域通常需要协同工作，以确保策略的完整性和连续性。

**二、应用架构的核心概念**

在TOGAF中，应用架构是整个企业架构的一个子集。它专注于应用软件的设计和构建，以支持企业的业务目标和要求。

应用架构在TOGAF中的主要任务包括：

1、**描述主要应用组件和它们的关系**：这包括了不仅仅是单一应用程序内的组件，还包括了多个应用程序之间如何交互和协作。

2、**界定与业务架构的关联**：应用架构需要紧密地与业务架构相连接，确保应用程序能有效地支持业务流程和业务功能。

3、**接口和交互**：定义应用组件之间，以及应用组件与外部环境（包括其他应用、系统和用户）之间的接口和交互模式。

4、**数据交换和数据模型**：描述应用如何存储、访问、管理和交换数据。

5、**技术和平台**：选择合适的技术和平台以支持应用的运行和交互。

6、**标准和指导方针**：应用架构也涵盖了关于如何构建和维护应用的标准和最佳实践。

7、**可持续性和可扩展性**：确保应用架构能适应未来业务和技术环境的变化。

8、**安全性和合规性**：包括对数据访问和信息交流的安全控制，以及满足相关法规和标准。

**三、应用架构目录、矩阵和视图详解**

那么，应用架构具体长啥样呢？

TOGAF 提供了一个详细的架构工具模型，如下所示：

![](https://pic2.zhimg.com/v2-1585c457f92697428850738a63cc805f_1440w.jpg)

在阶段C，TOGAF定义了应用架构的主要交付物，共分目录、矩阵、图三类类型，总计14个制品：

1、**图**：应用通信图、应用程序和用户位置图、应用程序用例图、软件工程图、软件分发图、流程/应用程序实现图、企业可管理性图、应用迁移图

2、**目录**：应用程序组合目录、接口目录

3、**矩阵**：应用交互矩阵、应用程序/功能矩阵、角色/应用程序矩阵、应用程序/组织矩阵

下面以案例的形式逐个说明这14个制品的具体内容，应用架构的最终交付物往往是这14个制品的编排组合：

**1、应用通信图**

应用程序通信图的目的是描述元模型实体中应用程序之间通信的所有模型和映射。它显示应用程序组件和组件之间的接口。接口可能与数据实体相关联，如果合适的话，应用程序可能与业务服务相关联。

下图示例了一个计费体系的应用通信图：

![](https://pic2.zhimg.com/v2-6fd25fd4fe8776167210382a2ccbd6d3_1440w.jpg)

**2、应用程序和用户位置图**

应用程序和用户位置图显示应用程序的地理分布，目的是清楚地描述业务用户通常与应用程序交互的业务位置，但也是应用程序基础设施的托管位置。

下图显示了一家制造企业的应用程序和用户位置图：

![](https://pica.zhimg.com/v2-cc510c7f24412b4d294c9f6196144668_1440w.jpg)

**3、应用程序用例图**

应用程序用例图显示应用程序服务的使用者和提供者之间的关系。应用程序服务由参与者或其他应用程序服务使用，应用程序用例图通过展示功能如何以及何时使用，提供了描述应用程序功能的丰富性。

应用程序用例图的目的是帮助描述和验证参与组合及其角色与应用程序之间的交互。随着架构的进展，用例可以从功能信息演变为包括技术实现细节。应用程序用例可以在更详细的系统设计工作中重复使用。

下图显示了银行系统的应用程序用例图：

![](https://pic1.zhimg.com/v2-e5acec8dc5411b402c92f895aef0a200_1440w.jpg)

**4、软件工程图**

软件工程图将应用程序划分为包、模块、服务和从开发角度看的操作。它使得在规划迁移阶段时能够进行更为详细的影响分析，以及分析机会和解决方案。对于应用程序开发团队和应用程序管理团队在管理复杂的开发环境时，这种图是理想的。

下图显示了支付应用组件的软件工程图示例，可以看到有服务，包和模块，模块其实可以进一步下钻到代码文件等等：

![](https://pic3.zhimg.com/v2-3c82e23a7ae8f4d86e26b3aa7445ba96_1440w.jpg)

**5、软件分发图**

软件分布图展示了应用软件如何在整个系统中被结构化和分布。它在系统升级或应用合并项目中非常有用。

该图展示了物理应用是如何分布在物理技术上以及这些技术的位置。这不仅能清晰地看到软件是如何被托管的，还能让运维人员了解一旦应用软件被安装后是如何维护的。

下图是典型的CRM系统的软件分发图示例：

![](https://picx.zhimg.com/v2-cf4a4b4325de362e9dc389e717f51eab_1440w.jpg)

**6、流程/应用程序实现图**

流程/应用程序实现图主要用于清晰地描述多个应用如何协同完成一个业务流程，并在执行过程中的何时何地发生交互。

该图表不仅展示应用间的通信，还进一步指定了这些通应用交互和执行任务的具体顺序或时间限制。它还明确标出了在哪些关键环节，任务或数据从批量处理方式切换到实时处理方式，或反之。

通过这种方式，流程/应用实现图可以帮助我们识别复杂流程中可以简化或优化的环节，并找出潜在的改进点，以更高效地为业务用户提供所需的信息。这一图表特别适用于那些旨在提高流程效率和减少应用间不必要交互的场景。

下图显示了股票买入业务流程对应的应用程序实现图示例：

![](https://pic1.zhimg.com/v2-cfb2bf5d5074977ad62a02a146d5ecf8_1440w.jpg)

**7、企业可管理性图**

企业可管理性图展示了一个或多个应用程序如何与支持解决方案运营管理的应用和技术组件进行交互。

这张图实际上是应用通信图的一个特定过滤器，专门用于企业级管理软件。通过分析，可以揭示重复和缺口，以及组织的IT服务管理运营中的机会。

下图示例了一个电商系统的企业可管理性图：

![](https://pic3.zhimg.com/v2-ca0f435aba37941ae5b5a846c6245332_1440w.jpg)

**8、应用迁移图**

应用程序迁移图标识从基线到目标应用程序组件的应用程序迁移。通过准确显示需要在迁移阶段之间映射的应用程序和接口，它可以更准确地估计迁移成本。它将识别临时应用程序、分段区域以及支持迁移所需的基础设施（例如，并行运行环境等）。

下图示例了一个企业在收购了某些系统给出的应用迁移图：

![](https://picx.zhimg.com/v2-6c211c412e190185bb3bdea2cc0b1eff_1440w.jpg)

**9、应用程序组合目录**

这个目录的目的是识别和维护企业中的所有应用程序的列表。这个列表有助于定义可能影响特定类型应用程序的变更计划的水平范围。经过协商的应用程序组合允许定义和管理一组标准的应用程序。应用程序组合目录为其余矩阵和图表提供了基础。通常，它是应用架构阶段的起点。

应用程序组合目录包含以下元模型实体：

■信息系统服务

■逻辑应用程序组件

■物理应用程序组件

一个电商的应用程序组合目录如下所示：

![](https://pica.zhimg.com/v2-f6fc6208dd89446b2bf25c1978b0d132_1440w.jpg)

**10、接口目录**

接口目录的目的是确定和记录应用程序之间的接口，以尽早地确定应用程序之间的整体依赖关系。应用程序将在其他应用程序内部创建、读取、更新和删除数据；这将通过某种形式的接口实现，无论是通过定期加载的批处理文件，直接连接到另一个应用程序的数据库，还是通过某种形式的 API 或 Web 服务。

应用程序组件 - 应用程序组件实体关系的映射是一个重要的步骤，因为它使以下操作成为可能：

■了解应用程序之间的互动程度，识别那些在依赖于其他应用程序方面具有中心性的应用程序

■了解应用程序之间的接口数量和类型

■了解应用程序之间接口的重复程度

■在考虑目标应用程序组合时，识别接口简化的潜力

■支持差距分析，并确定是否缺少任何应用程序，因此需要创建

接口目录包含以下元模型实体：

■逻辑应用程序组件

■物理应用程序组件

■应用程序与应用程序关系

一个电商的接口目录如下所示：

![](https://pic4.zhimg.com/v2-7b97a82dfb763eaeb8b14175fec96147_1440w.jpg)

**11、应用交互矩阵**

应用交互矩阵的目的是展示应用程序之间的通信关系。该矩阵以表格形式映射应用程序之间的交互，相当于接口目录或应用通信图的等效表现。

下面是ERP的应用交互矩阵示例：

![](https://pica.zhimg.com/v2-0bb7a4ad1e9b178467d4317417957eec_1440w.jpg)

**12、应用程序/功能矩阵**

应用程序/功能矩阵的目的是描述企业内应用程序与业务功能之间的关系。业务功能由组织单位执行。一些业务功能和服务将由应用程序支持。

应用程序组件 - 功能关系的映射是一个重要的步骤，因为它使以下操作成为可能：

■将应用程序的使用分配给由其支持的业务功能

■了解由其执行的业务服务和流程的应用程序支持需求

■支持差距分析，并确定是否缺少任何应用程序，因此需要创建

■定义由特定业务功能使用的应用程序集

一个电商的应用程序/功能矩阵可能如下所示：

![](https://picx.zhimg.com/v2-72db39b36aa5b836c48724c68677aa0b_1440w.jpg)

**13、角色/应用程序矩阵**

角色/应用程序矩阵的目的是描述企业内使用应用程序的业务角色之间的关系。组织中的人与应用程序互动。在这种互动过程中，这些人扮演特定的角色来执行任务，例如产品采购员。

应用程序组件 - 角色关系的映射是一个重要的步骤，因为它使以下操作成为可能：

■将应用程序的使用分配给组织中的特定角色

■了解支持该功能的业务服务和流程的应用程序安全性要求，并检查这些要求是否符合当前政策

■支持差距分析，并确定是否缺少任何应用程序，因此需要创建

■定义特定业务角色使用的应用程序集；在采用基于角色的计算方案时至关重要

一个ERP的角色/应用程序矩阵可能如下所示：

![](https://pic2.zhimg.com/v2-01ed9a0bdcfbdc24a1dfb013aefdfb79_1440w.jpg)

**14、应用程序/组织矩阵**

这个矩阵的目的是描述企业内应用程序与组织单位之间的关系。业务功能由组织单位执行。一些由这些组织单位执行的功能和服务将受到应用程序的支持。

应用程序组件 - 组织单位关系的映射是一个重要的步骤，因为它使以下操作成为可能：

■将应用程序的使用分配给执行业务功能的组织单位

■了解由组织单位执行的业务服务和流程的应用程序支持需求

■支持差距分析，并确定是否缺少任何应用程序，因此需要创建

■定义特定组织单位使用的应用程序集

一个可能的应用程序/组织矩阵如下所示：

![](https://pic2.zhimg.com/v2-ebaa458ebaaf0ee7a06c3f6297a33049_1440w.jpg)

**四、与“[4+1视图](https://zhida.zhihu.com/search?content_id=238175325&content_type=Article&match_order=1&q=4%2B1%E8%A7%86%E5%9B%BE&zhida_source=entity)”的关系**

**4+1视图模型**（View Model）是一种软件架构描述方法，由Philippe Kruchten首次提出。这个模型主要用于解释一个软件系统的不同方面，并通过五个不同的“视图”来描述这些方面。

这五个视图通常是：**[逻辑视图](https://zhida.zhihu.com/search?content_id=238175325&content_type=Article&match_order=1&q=%E9%80%BB%E8%BE%91%E8%A7%86%E5%9B%BE&zhida_source=entity)**、**[开发视图](https://zhida.zhihu.com/search?content_id=238175325&content_type=Article&match_order=1&q=%E5%BC%80%E5%8F%91%E8%A7%86%E5%9B%BE&zhida_source=entity)**、**[物理视图](https://zhida.zhihu.com/search?content_id=238175325&content_type=Article&match_order=1&q=%E7%89%A9%E7%90%86%E8%A7%86%E5%9B%BE&zhida_source=entity)**、**[过程视图](https://zhida.zhihu.com/search?content_id=238175325&content_type=Article&match_order=1&q=%E8%BF%87%E7%A8%8B%E8%A7%86%E5%9B%BE&zhida_source=entity)**和**[用例视图](https://zhida.zhihu.com/search?content_id=238175325&content_type=Article&match_order=1&q=%E7%94%A8%E4%BE%8B%E8%A7%86%E5%9B%BE&zhida_source=entity)**。用例视图通常是中心，其他四个视图围绕它展开。

![](https://pic1.zhimg.com/v2-12a40d178e4cd435292926c9adda188c_1440w.jpg)

1、**逻辑视图**：关注系统的功能性。它描述了如何从概念上对系统进行组织，通常使用类图、对象图、状态图等来描述。

2、**开发视图**：关注软件的组织和模块化，在代码层面上描述软件的架构。这通常使用组件图或包图来表示。

3、**物理视图**：关注系统的部署和分布，描述了软件如何映射到硬件和网络架构上。通常使用部署图来描述。

4、**过程视图**：关注系统的并发和同步，描述了系统的进程和线程，以及它们是如何同步和互相通信的。这通常使用活动图或序列图来描述。

5、**用例视图**：这是中心视图，主要关注系统的外部用户交互。它描述了系统如何满足外部因素（通常是用户或其他系统）的业务或操作需求。用例图常用于这个视图。

这五种视图体现了我们从哪些视角去理解一个系统：

1、【白盒视图】逻辑视图（也叫结构视图）：从结构化视角，描述该系统对用户提供的所需功能服务所具备的组件结构和数据结构，以及一些边界约束条件，清晰的描述给用户提供的功能需求服务是如何构建的。

2、【白盒视图】实现视图（也叫开发视图）：从结构化视角+行为视角，去描述实现系统功能的各个组件和模块是如何实现的。

3、【白盒视图】行为视图（也叫过程视图、处理视图）：从行为视角，描述系统各个组件和模块是如何进行通信的。

4、【黑盒视图】部署视图（也叫物理视图）：从交互视角，描述系统可以部署在那些物理环境上（服务器、PC端、移动端等）和软件环境（虚拟机、容器、进程等）。

5、【黑盒视图】用例视图（也叫场景视图）：从外部视角，描述系统的参与者（用户）与系统功能用例的关系。反映的是系统的最终用户需求和交互设计。

“4+1视图”描述的是软件架构，跟TOGAF的应用架构有对应之处：

逻辑视图<->应用程序/功能矩阵

开发视图<->软件工程图

物理视图<->软件分发图

用例视图<->应用程序用例图

运行视图<->应用通信图

**五、应用架构实战**

下面举些实践案例，看看应用架构这些制品与这些案例的对应关系。

**1、应用程序/功能矩阵**

下图是某企业客服系统的功能架构图，实际就是应用程序/功能矩阵，但图形表达更加直观易懂。TOGAF在业务架构中倒是给出了功能分解图。

![](https://pic4.zhimg.com/v2-9cc8f7421274dfb733fadb92c57f428d_1440w.jpg)

**2、软件工程图**

下图是某系统组件架构图，实际就是软件工程图。

![](https://pic2.zhimg.com/v2-d1ed4f00f96ded66d6dea2ab8b41fb79_1440w.jpg)

**3、软件分发图**

下图是某详单查询图，实际就是软件分发图。

![](https://pic3.zhimg.com/v2-d24b1d86f3d97c55f1da5ff5576cea5c_1440w.jpg)

**4、应用程序用例图**

这是某校园课程系统的场景视图，其实就是应用程序用例图。

![](https://picx.zhimg.com/v2-4d1c7bd23488c2e6325e8bf50848fe19_1440w.jpg)

希望对你有所启示。